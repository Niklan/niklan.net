parameters:
  # These parameters set in the compiler pass. Check if for more info.
  external_content.environments: []
  external_content.extensions: []
  external_content.finders: []
  external_content.identifiers: []
  external_content.bundlers: []
  external_content.converters: []
  external_content.loaders: []

services:
  _defaults:
    autowire: true

  Drupal\external_content\Contract\ExternalContent\ExternalContentManagerInterface: '@Drupal\external_content\ExternalContent\ExternalContentManager'
  Drupal\external_content\ExternalContent\ExternalContentManager: { }

  Drupal\external_content\Parser\ParserFacade: { }
  Drupal\external_content\Serializer\Serializer: { }
  Drupal\external_content\Builder\RenderArrayBuilder: { }

  Drupal\external_content\Contract\Serializer\SerializerInterface: '@Drupal\external_content\Serializer\Serializer'
  Drupal\external_content\Contract\Parser\ParserFacadeInterface: '@Drupal\external_content\Parser\ParserFacade'

  # Environment.
  Drupal\external_content\Contract\Environment\EnvironmentManagerInterface: '@Drupal\external_content\Environment\EnvironmentManager'
  Drupal\external_content\Environment\EnvironmentManager:
    arguments:
      $environments: '%external_content.environments%'

  # Extensions.
  Drupal\external_content\Contract\Extension\ExtensionManagerInterface: '@Drupal\external_content\Extension\ExtensionManager'
  Drupal\external_content\Extension\ExtensionManager:
    arguments:
      $extensions: '%external_content.extensions%'
  Drupal\external_content\Extension\FileFinderExtension:
    tags:
      - { name: external_content.extension, id: file_finder }
  Drupal\external_content\Extension\BasicHtmlExtension:
    tags:
      - { name: external_content.extension, id: basic_html }

  # Finders.
  Drupal\external_content\Contract\Finder\FinderManagerInterface: '@Drupal\external_content\Finder\FinderManager'
  Drupal\external_content\Finder\FinderManager:
    arguments:
      $finders: '%external_content.finders%'
  Drupal\external_content\Finder\FileFinder:
    arguments:
      $mimeTypeGuesser: '@file.mime_type.guesser'
    tags:
      - { name: external_content.finder, id: file }

  # Identifiers.
  Drupal\external_content\Contract\Identifier\IdentifierManagerInterface: '@Drupal\external_content\Identifier\IdentifierManager'
  Drupal\external_content\Identifier\IdentifierManager:
    arguments:
      $identifiers: '%external_content.identifiers%'

  # Bundlers.
  Drupal\external_content\Contract\Bundler\BundlerManagerInterface: '@Drupal\external_content\Bundler\BundlerManager'
  Drupal\external_content\Bundler\BundlerManager:
    arguments:
      $bundlers: '%external_content.bundlers%'
  Drupal\external_content\Bundler\SameIdBundler:
    tags:
      - { name: external_content.bundler, id: same_id }

  # Converters.
  Drupal\external_content\Contract\Converter\ConverterManagerInterface: '@Drupal\external_content\Converter\ConverterManager'
  Drupal\external_content\Converter\ConverterManager:
    arguments:
      $converters: '%external_content.converters%'
  Drupal\external_content\Converter\HtmlConverter:
    shared: false
    tags:
      - { name: external_content.converter, id: html }

  # Loaders.
  Drupal\external_content\Contract\Loader\LoaderManagerInterface: '@Drupal\external_content\Loader\LoaderManager'
  Drupal\external_content\Loader\LoaderManager:
    arguments:
      $loaders: '%external_content.loaders%'
